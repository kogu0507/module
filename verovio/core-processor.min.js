import{loadVerovio as t}from"./loader.min.js";export class CoreProcessor{#a=null;#b={};constructor(t){if(!t)throw Error("Verovio Toolkit インスタンスが必要です。");this.#a=t,this.#a.setOptions(this.#b)}setRenderOptions(t){this.#b={...this.#b,...t},this.#a.setOptions(this.#b)}async renderSvgFromUrl(t,e=1){let r=await fetch(t);if(!r.ok)throw Error(`MEI の取得に失敗: ${r.status} ${r.statusText}`);let o=await r.text();return this.#a.loadData(o),this.#a.renderToSVG(e)}renderSvgFromMei(t,e=1){return this.#a.loadData(t),this.#a.renderToSVG(e)}async renderMidiFromUrl(t){let e=await fetch(t);if(!e.ok)throw Error(`MEI の取得に失敗: ${e.status} ${e.statusText}`);let r=await e.text();return this._renderMidi(r)}renderMidiFromMei(t){return this._renderMidi(t)}_renderMidi(t){this.#a.loadData(t);let e=this.#a.renderToMIDI(),r=atob(e),o=r.length,i=new Uint8Array(o);for(let s=0;s<o;s++)i[s]=r.charCodeAt(s);return i.buffer}getPageCount(){return this.#a.getPageCount()}}